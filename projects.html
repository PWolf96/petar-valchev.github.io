<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<title>PROJECTS</title>
		<style>
			body:before {
				font-family: Arial, sans-serif;
				margin: 0;
				padding: 0;
				background-color: #f2f2f2;
			}

			header::before {
				background-color: #333;
				color: #fff;
				padding: 20px;
				text-align: center;
			}

			h1 {
				margin: 0;
				font-size: 40px;
			}

			.container {
				max-width: 1000px;
				margin: 0 auto;
				padding: 20px;
				display: flex;
				flex-wrap: wrap;
				justify-content: space-between;
				margin-top: 100px;
				opacity: 0;
				animation: transitionIn 1s forwards;
			}

			@keyframes transitionIn {
				from {
					opacity: 0;
				}
				to {
					opacity: 1;
				}
			}

			video {
				width: 100%;
				height: auto;
			  }
			.fade-out {
				opacity: 0;
				transition: all 0.3s ease-in-out;
			}
			.fade-in {
				opacity: 1;
				transition: all 0.3s ease-in-out;;
			}
			.card {
				background-color: #fff;
				border-radius: 5px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				margin-bottom: 20px;
				width: 48%;
				padding: 20px;
				box-sizing: border-box;
			}

			.card h2 {
				margin: 0;
				font-size: 28px;
				color: #333;
				margin-bottom: 10px;
			}

			.card p {
				margin: 0;
				font-size: 16px;
				color: #666;
				line-height: 1.5;
			}

			.card a {
				color: #333;
				text-decoration: none;
				font-weight: bold;
				font-size: 16px;
				display: block;
				margin-top: 10px;
			}

			.card a:hover {
				color: #0099ff;
			}
			.hidden {
				display: none;
			}

		</style>
	</head>
	<body class="is-preload">

		<div id="wrapper">
			<header id="header">
				<nav>
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="projects.html">Projects</a></li>
						<li><a href="blog.html">Blog</a></li>
					</ul>
				</nav>
			</header>
			<div id="main">
				<!-- Garviz -->
				<article id="garviz">
					<h2 class="major">GARVIZ</h2>
					<video controls>
						<source src="images\GARVIZ promo.mp4" type="video/mp4"/>
						Your browser does not support the video tag.
						</video>
						<h3 style="margin-top: 100px;">Technologies used:</h3>
						<p>
							<img src="images\Python_logo.png" alt="logo1" style="width: 80px; padding: 0 20px;" >
							<img src="images\flask_logo.png" alt="logo2" style="width: 80px; padding: 0 20px;" >
							<img src="images\React_logo.png" alt="logo3" style="width: 80px; padding: 0 20px;" >
							<img src="images\sql_logo.png" alt="logo4" style="width: 80px; padding: 0 20px;" >
							<img src="images\Azure_logo.png" alt="logo5" style="width: 80px; padding: 0 20px;" >
						</p>

					<p>Garviz is an application which helps bringing objectivity in a subjective game like football. It aims to assist clubs, coaches or players who wish to get to the next level by making data driven decision-making. The application has three main functionalitiies.</p>
					<p>GATHER - the place where users can capture all the information for your team. Store data for coaches, players, sessions and matches.</p>
					<p>VISUALIZE - the place where users can look at the story of your team through dashboards. Create reports for team or player performance and share them with relevant stakeholders.</p>
					<p>ANALYZE - the place where users can gain insights that are not possible to catch with the human eye with the help of AI and Machine Learning models.</p>
					<p>The full stack application has been built using React as the front-end framework and Python-Flask as the back-end api which utilizes sql-alchemy ORM to communicate with a MSSQL database. The app has been built with the user in mind, allowing for flexibility and customization. Users can share teams, and assign different priviledges to users within a team. Furthermore, when it comes to gathering event data, the user can define the type of data to me collected. The application takes advantage of JWT authentication and authorization. It has been deployed as a web service using azure cloud services.</p>
					<p>The analyze section will take advantage of data science and machine learning algorithms to uncover hidden patterns in the data that has been gathered from teams. The use of association analysis will help find the most probable outcomes given a user defined scenario while LSTM will allow the users to reflect on playing styles of both teams and players.</p>
					<h3>Link to website:</h3>
					<a href="https://garviz.azurewebsites.net/">https://garviz.azurewebsites.net/</a>
				</article>
				<!-- Predicting patterns of play -->
				<article id="patterns">
					<h2 class="major">Predicting patterns of play</h2>
					<p>A Markov process is a process where predictions can be made regarding future outcomes based on the current state of play. In a given sequence of events, it iterates through each event where for each iteration it pairs the event with its descendant, labelling the first current state and the latter subsequent state. Each state has a list of all the different states (including itself) it can lead to and their frequency, forming a probability of going from it to another one. In the end, random sequences will be generated with an algorithm using those probabilities to form the most probable series of events given a certain event-location is the start.</p>
					<img src="images\patterns-1.PNG" alt="pattern1" style="width: 100%">
					<p>Markov chains are characterized as memoryless meaning that they generate the subsequent event only based on the current one and not on the ones before that. In the context of football, this approach will not provide the full context as it matters whether a player for example receives the ball from a short pass on the ground or from a 40m long ball. More accurate models exists that take those considerations into account and they will be explored in future articles. However, for the purpose of the analysis, the Markov model will be explored in its memoryless form.</p>
					<h3 style="margin-top: 100px;">Methodology:</h3>
					<p>The dataset that will be used is the WSL 2020/2021 season data provided by StatsBomb free data repository. All games that Chelsea WFC have played have been filtered in order to produce a dataset of events which occurred only during their games. Several assumptions have been made to aid the analysis, namely:</p>
					<p>1. The pitch has been split into 30 zones</p>
					<p>Analysing the coordinates of each event independently would not yield any insights due to the variable nature of event coordinates. Hence, the pitch has been split into zone containers each representing a certain range between X and Y coordinates. Figure 1 outlines the zones in which the pitch was split. The zones split the pitch into 6 laterally in order to break down the opposition half into 3rds and into 5 longitudinally in order to include the half-spaces which have become popular in modern football.</p>
					<img src="images\patterns-2.PNG" alt="pattern2" style="width: 100%">
					<p>Events have then been added to their respective containers. This forms a link between the event and the zone it happened which will be represented in the following format:</p>
					<p>{Event Type} — {Event Zone}</p>
					<p>An example itemset of a shot would look like the following:</p>
					<p>(Pass-Zone6) -> (Interception-Zone9) -> (Carry-Zone9) -> (Pass-Zone9) -> (Carry-Zone3)</p>
					<p>2. Carry and Ball Receipt events have been filtered out from the dataset</p>
					<p>Both have been deemed to not add extra value over using just the Pass event in the context of the analysis. Every Pass has a Ball Receipt linked to it which is very rarely positioned in a different zone to the next event, making it redundant. Just like passes are coupled with ball receipts, in the dataset used, every time a ‘Dribble’ event occurs it is coupled with a ‘Carry’ event. Upon inspection, it was determined that ‘Carry’ events provide more information in the context of the analysis and were kept over ‘Dribble’ events.</p>
					<p>3. Possessions against Chelsea have been filtered out</p>
					<p>Since the purpose of this analysis is to concentrate on predicting what Chelsea WFC do when they are in possession, all possessions from other teams have been excluded from the dataset to avoid misleading results.</p>
					<p>Once the dataset has been cleaned, all the event-zone combinations have been added to a list. This list is then iterated through to create a Markov model containing the probabilities of advancing onto any other event-zone combination given the current state. For the purpose of this exercise, this will be sufficient in order to generate stories.</p>
					<p>To generate a random possession, a starting state will need to be passed onto the algorithm as well as the length of the sequence we want to generate. The algorithm will then use the probabilities that have been generated from the Markov model to create a passing sequence to the desired length. In theory, any event-zone combination can be passed as a starting state, but for the purpose of this analysis, only four states will be looked into. Similarly, a possession of any length can be generated and for this analysis, the assumed length of a possession will be five events. Lastly, nine hypothetical possessions will be generated for each state.</p>
					<p>The only step left is to define the states of interest. For this purpose, a heat map, containing all the events during the 20/21 season will be used to determine the most used zones from the team.</p>
					<img src="images\patterns-3.PNG" alt="pattern3" style="width: 100%">
					<p>Figure 2 outlines the commonly used areas by the team while in possession. It can be seen that Chelsea has made use of Zones 11,16 on the left-hand side and Zones 15,20 on the right-hand side. Only zones 16 and 20 will be used as states as they are closer to the opponent’s goal. On top of those 2 zones, passes from Zone 3 will be included in order to represent a probable sequence of events following a goal kick from Chelsea, as well as Zone 21, considered to be one of the zones most frequently leading to a shot as per the previous article.</p>
					<h3 style="margin-top: 100px;">Results:</h3>
					<p>Pass-Zone 3</p>
					<img src="images\patterns-4.PNG" alt="pattern4" style="width: 100%">
					<p>Looking at the nine hypothetical cases that have been generated from the algorithm for ‘Pass-Zone3’ it can be seen that there is an equal spread between resolving to play out from the back and making the decision to play over the first line of the opposition directly to the middle 3rd. An interesting trend can be observed when the team do decide to play over the first line of defence, they mainly resolve to playing in Zone 11 which is on the left-hand side of the pitch. Looking further into the sequence, once the ball reaches Zone 11 it is being progressed forward through the wide areas into Zones 16 and 21 with only one occasion where it is being passed back and recycled(7). When a decision is made to play out from the back, rather unsurprisingly the following four plays do not progress the ball further onto the pitch but is played between players in the zones in front of the goal, possibly to force a reaction from the opposition.</p>
					<p>Pass-Zone 16</p>
					<img src="images\patterns-5.PNG" alt="pattern5" style="width: 100%">
					<p>The generated sequences starting with Pass-Zone16 show a preference for slow build-up instead of a direct approach. Upon inspection, only one sequence (2) presents an attack which ends up in Zone 28. Instead, the algorithm insists that it is more likely for the team to make short passes in the attempt to consolidate possession or to move the ball to the other side of the pitch. There has also been a lack of long ball switches from the left-hand side to the right-hand side which serves as a further indication of the team’s preference to play short passes when in that area.</p>
					<p>Pass-Zone 20</p>
					<img src="images\patterns-6.PNG" alt="pattern6" style="width: 100%">
					<p>Similar to the previous case, Pass-Zone20 offers little difference in principle to what was observed when the team was in a similar position but on the other side of the pitch. The most probable sequence in this area consists of short passes which aim to consolidate possession or to switch the area of play to the other side of the pitch. Two outliers are presented in (3) and (5) which show attempts for a more direct play.</p>
					<p>Pass-Zone 21</p>
					<img src="images\patterns-7.PNG" alt="pattern7" style="width: 100%">
					<p>Looking at Pass-Zone21 becomes more interesting as the area is positioned in the attacking 3rd of the pitch and one would expect to see more assertive plays to attack the opposition goal. And indeed a shot has been included in the sequence in three (1),(3), and (8) of the nine generated samples which can serve as an indication of the team’s potency to create a shooting chance from that area. In those cases, the shot has been preceded by either a cross (1),(8) or a switch into the opposite half-space, something that could be worth analysing in depth. It can also be observed the high presence of Pressure events which can serve as an initial indication of counter-pressing tactical instructions in the final 3rd.</p>
					<h3 style="margin-top: 100px;">Conclusion:</h3>
					<p>In this article, a season-long dataset of events for Chelsea WFC has been analysed and a Markov chain has been constructed to calculate the probabilities of transitioning from one state to another. This has then been used to simulate possessions with a pre-determined starting point. For the purpose of the analysis 4 starting points have been analysed namely: a goal kick Pass-Zone3 passes starting in the most active areas for the team Pass-Zone16 and Pass-Zone20 and passes from an area determined to be potent for creating shots Pass-Zone21. By running only nine simulations, some potentially interesting insights can be observed like the team preferring to pass to the left-hand side of the pitch if it makes a decision to skip the first line of defence or that when in Zone20 or Zone16 the team would rather consolidate possession than look for a direct approach. Pass-Zone21 had 30% of its simulations ending with a shot which confirms its potency to create shots, it also visually recreated the way that is most likely for the team to create a shooting chance — with crosses.</p>
					<p>Markov chains are stochastic in nature and only nine simulations are not a big enough sample size to reach any conclusions. Having a higher number of simulations would generate a set of sequences which would together contain a more accurate representation of what a given team is capable of. Those can then be labelled and fed into the coaching staff providing the insights that could allow for a better understanding of the analysed team.</p>
					<p>In this case, five events in total have provided satisfactory results but they can be changed to reflect the needs of the user.The accuracy of the probabilities can be further increased by taking into account the action that led to the current state, however for that to be feasible, a bigger dataset is required.</p>
					<h3>Useful links:</h3>
					<a href="https://github.com/PWolf96/Football-Data-Science">Github: Predicting patterns of play</a>
					<a href="https://medium.com/@pv1g15/predicting-patterns-of-play-e0817d0d7055">Medium: Predicting patterns of play</a>
				</article>
				<!-- Player contribution - 1 -->
				<article id="contribution1">
					<h2 class="major">Player contribution - 1st order</h2>
					<p>This article will explore the possibility of evaluating player contribution to shots. Inspired by an article written by StatsBomb, a first-order Markov model will be constructed to take into account all events that have happened in a single season for Chelsea WFC and evaluate their contribution towards a shot.</p>
					<h3 style="margin-top: 100px;">First order Markov chain</h3>
					<p>A Markov chain is a random process describing a sequence of possible events in which the probability of each event depends on events that happened before. This analysis will use a first-order Markov chain meaning that the probability of each event depends only on the state attained in the previous event. A graphical representation of the chain is given in Figure 1. The chain is divided into transition states and absorption states.</p>
					<img src="images\markov1-1.PNG" alt="markov1-1" style="width: 100%">
					<p>States that have a probability of transitioning into another state are called transient states.</p>
					<p>States in which the probability of remaining in the state is 1 are called absorption states.</p>
					<p>Once the probabilities involving all states are calculated, a matrix is constructed to reflect those probabilities called a transition matrix. Similarly, an absorption matrix is constructed reflecting the probabilities of each transient state resulting in an absorption state. The probability of reaching an absorption state from a given transient state in n-steps is calculated. A fundamental matrix is derived from the transition matrix which is then used to calculate the expected number of plays as its row sums. Finally, the ‘contribution factor’ is calculated by the product of the fundamental matrix and the absorption matrix.</p>
					<h3 style="margin-top: 100px;">Methodology:</h3>
					<p>To achieve the analysis, the necessary cleaning process needs to be carried out. As with previous analyses, the cleaning starts with splitting the pitch into 30 zones and excluding the events which are determined to not add any additional value to the possession chains. Furthermore, only shots which meet a certain xG threshold would be considered shots. For a more detailed explanation of these steps, previous posts can be checked.</p>
					<img src="images\patterns-2.PNG" alt="markov1-2" style="width: 100%">
					<p>For absorption states two possible outcomes will be considered, namely:</p>
					<p>- Shot</p>
					<p>- Loss of possession</p>
					<p>Whether the possession ends with a shot, which is considered a positive outcome, or loss of possession, a negative outcome. A decision has been made to include shots as an outcome instead of goals as even though goals provide the highest value in the context of a football game, some valuable plays which do not end up in a goal get missed out. Similarly with shots, there will be valuable plays which will not result in a shot. However, less valuable plays will be missed out through tracking shots, than goals since the first one occurs more frequently than the latter. In that respect, it is believed that having shots as an outcome will capture the true value of a player to a greater extent.</p>
					<p>In terms of transition states, for the purpose of this analysis, we are interested in the zones which contribute to a positive outcome the most. For this reason, each zone will be considered a transient state. On top of that four more set-piece scenarios have been added, namely:</p>
					<p>- Goal kick</p>
					<p>- Throw in</p>
					<p>- Corner</p>
					<p>- Free kick</p>
					<p>Combined together there are 34 transient states which will be used.</p>
					<p>Once the transient and absorption states are known, the dataset would need to be manipulated to accommodate for the analysis. The dataset is divided into possession sequences where each possession sequence is considered individually. Each event in the possession is then coupled with its descendant, meaning that for any given event, the current state is the zone or set-piece that it has occurred in and the next state is the zone or set-piece of the next event in the couple. An exception is only made for the last event of a possession sequence where the next state ends in either a ‘shot’ or a ‘loss of possession’. Events after manipulation are shown in Table 1.</p>
					<img src="images\markov1-2.PNG" alt="markov1-3" style="width: 100%">
					<p>A Markov model is then run on the dataset to generate the probabilities of going between transient states and absorption states. This will then be used to calculate the shot contribution value of each transient state. This will be achieved with the following matrices:</p>
					<p>(1) 34x34 transition matrix — containing the probabilities of each transition state to end up in any other transition state</p>
					<p>(2) 34x2 absorption matrix — containing the probabilities of each transition state to end up in the respective absorption state</p>
					<p>(3) 34x34 identity matrix</p>
					<p>(4) 34x34 fundamental matrix — the inverse of the identity matrix minus the transition matrix</p>
					<p>The probability of each transition state leading to an absorption state is calculated by the product of the fundamental matrix and absorption matrix. When the probabilities are known, the player contribution can be calculated by assessing if the play done by the particular player increases the probability of a shot or decreases it. When the next event is a shot the probability is equal to 1 and if it is a loss in possession then it is equal to 0.</p>
					<p>Player contribution = Probability of a shot | Next event — Probability of a shot | Current event</p>
					<h3 style="margin-top: 100px;">Results:</h3>
					<p>Results of the probabilities have been presented in Figures 2 and 3.</p>
					<img src="images\markov1-3.PNG" alt="markov1-4" style="width: 100%">
					<img src="images\markov1-4.PNG" alt="markov1-5" style="width: 100%">
					<p>Figure 2 shows that rather unsurprisingly, zone 28 is the area which has the highest probability of preceding a shot. It is followed by corners which serves as an indication that the team takes advantage of corner set-pieces to generate shots. It can be observed that the left-hand side area has a slight edge for shot generation Zone26 narrowly edges Zone 24 and is followed by Zone 22 whilst Zone29 and Zone27 have a fairly similar probability. On the other end of the field, as expected, are the areas which contribute to a shot the least, with the lowest being Zone1 and Zone5.</p>
					<p>The derived equation for player contribution has been used to evaluate each event. In the end, all events in which a particular player has been involved have been summed to calculate the player’s season contribution towards shots for the team. The results are presented in Figure 4.</p>
					<img src="images\markov1-5.PNG" alt="markov1-6" style="width: 100%">
					<p>Analysing Figure 4 provides some interesting insights. Unsurprisingly, the model determines Sam Kerr as the player with the highest contribution towards shots with Pernille Harder and Francesca Kirby second and third. This could be largely influenced by those three players being the ones with the most shots on the team, meaning that they convert chances into shots which would eventually score goals. On the other hand, it could also serve as an indication that those players progress the ball successfully into more dangerous areas more often than not. On the other side, we can see that Bethany England has the lowest shot contribution from the team. The result can be broken down into a few potential reasons. Firstly, the model punishes giving possession away, meaning that if the play style of the player is to attempt many aggressive and high-risk passes albeit most of them being unsuccessful, it would drive down contribution due to the fact that the ball is given away more times than chances have been created. Secondly, players which tend to be on the other side of the spectrum and play too many safe passes in advanced areas are also punished by the model since instead of progressing the ball into an area with a higher possibility of a positive outcome, the ball is recycled and chances are not taken. Figure 5 represents the difference between the current model and the one that was built, taking into account if the player was under pressure during the event. In some cases, a player not being under pressure in deeper zones might prove to be more impactful for creating a shot than being under pressure in an advanced area. With that regard, the model which includes pressure has the potential to be more accurate.</p>
					<img src="images\markov1-6.PNG" alt="markov1-7" style="width: 100%">
					<p>It can be observed that the values have not changed much, mainly due to the fact that in the most dangerous areas, players will very rarely not be under pressure.</p>
					<p>It is important to clarify that the model does not take into account any tactical considerations where players are tasked with the responsibility of consolidating play or ones who are given the freedom to attempt riskier passes with the possibility of making that one killer pass that will ultimately decide a game. Different models can then be constructed, using different transition and absorption states to capture any specific coaching requirements. Furthermore, the model does not take into account the context of the event. Details such as state of the game, opponent or occasion have not been taken into account. Differentiating between whether the player was under pressure or not did not provide significant changes. Estimation accuracy can also be improved by implementing a higher-order Markov model which takes into account the previous state before reaching the current one. Lastly, the model does not consider how events transition from one state to another. A Markov decision process could be constructed to accommodate that need.</p>
					<h3 style="margin-top: 100px;">Conclusion:</h3>
					<p>A first-order Markov model has been constructed and used to analyse the 20/21 season of Chelsea WFC. It aimed to evaluate players based on their contribution towards creating shooting chances and taking shooting opportunities. It was also used to get a visual representation of which zones have the highest probability of creating a shooting chance where it was concluded that the left-hand side is slightly more dangerous than the right-hand side with corners possessing the second highest threat of a shot after Zone 28. Players playing in forward or midfield positions yield the highest shot contribution. Defenders having low shot contribution values can serve as an indication that Chelsea does not use defenders as much to progress the ball into dangerous positions. This can be a result of tactical instructions or a lack of qualities to do so. Interesting insights have been extracted when looking at the least contributing players, which can lead to analysis in further detail when raised to the coaching staff.</p>
					<p>Player evaluation has always been a crucial part of any competitive team. Recognising players as ones who perform up to standard and on the other hand, players who need to be developed further is embedded into the work cycle of any coaching staff. Before the digital era, conclusions have been deducted primarily based on subjectivity. However, technology has given the opportunity for a more objective approach to player evaluation based on pre-agreed criteria. A vast amount of parameters can be taken into account over a long time span, helping to uncover certain players’ merit, which could have been invisible to the naked eye. In doing so, a team can not only recognise and retain talent more effectively but also scout and uncover hidden gems which can vastly improve certain aspects of the team, something which in the long run can make a difference.</p>		
					<h3>Useful links:</h3>
					<a href="https://github.com/PWolf96/Football-Data-Science">Github: Evaluating player contribution</a>
					<a href="https://medium.com/@pv1g15/evaluating-player-contribution-f9faea52238b">Medium: Evaluating player contribution</a>
				</article>
				<!-- Player contribution - 2 -->
				<article id="contribution2">
					<h2 class="major">Player contribution - 2nd order</h2>
					<h3 style="margin-top: 100px;">Methodology:</h3>
					<p>The methodology is the same as in the first-order Markov chain analysis with a few notable exceptions.</p>
					<p>Zones 1 to Zone 15 have been condensed to Zone 1 — Zone 3 as outlined in Figure 1 below. Reason being that implementing a second-order model contributes to a significant increase in transient states which would be computationally demanding.</p>
					<img src="images\markov2-1.PNG" alt="markov2-1" style="width: 100%">
					<p>The two absorption states have been kept as Loss of possession and Shot. However, the transient state corresponds to the pairing of the current state with its preceding state. Having 18 zones combined with 4 set-piece states amounts to a total of 484 transient states to be considered. Table 1 presents possession 5, manipulated to suit a second-order model.</p>
					<img src="images\markov2-2.PNG" alt="markov2-2" style="width: 100%">
					<p>Constructing the matrices proved to be not as straightforward as in the first-order model. Having a second-order model firstly increased the amount of possible scenarios more than tenfold. Secondly, it resulted in some highly unlikely combinations for example:</p>
					<p>Zone 1 — Zone 30 -> Zone 30 — Zone 1</p>
					<p>Zone 1 — Corner -> Corner — Zone 3 etc.</p>
					<p>This would result in many zero-sum columns in the matrices which is problematic. Excluding those whilst maintaining a square matrix would result in data loss. However, in the context of a football game, it is assumed that any events that have been linked to any of the pruned scenarios would have not had any significant contribution to shot generation. Therefore a decision has been made to prune the zero-sum cases which would reduce the transient states to 394.</p>
					<p>Finally, the player contribution is calculated using the following formula:</p>
					<p>Player contribution = Probability of a shot | Next event pair — Probability of a shot | Current event pair</p>
					<h3 style="margin-top: 100px;">Results:</h3>
					<p>Figure 3 presents the results from the second-order model compared to the first-order one.</p>
					<img src="images\markov2-3.PNG" alt="markov2-3" style="width: 100%">
					<p>Looking at Figure 3 it can be concluded that applying a second-order Markov model does make a difference in the outcome for shot contribution. Most of the players have had a positive change in contribution with a notable exception being Sam Kerr. This implies that most players have been losing possession when there was little possibility to progress the attack, meaning that when they get an opportunity to create a shot they are converting more than the first-order model suggests. Another reason can be the fact that the zones have been reduced to 18 which lowers the shot possibility of zones closer to the halfway line as they are put in the same category as the least shot potent zones. Although absolute contribution has improved, when comparing players, the order has not changed dramatically, meaning that all players benefit from the second-order model in the same manner. Notable exceptions to that are Ann-Katrin Berger and Millie Bright who seem to have benefited the most from the model.</p>
					<h3 style="margin-top: 100px;">Conclusion:</h3>
					<p>Implementing a second-order Markov model suggests that including the preceding event in the context of the current event makes a difference in the probability of creating a shooting opportunity. That is to the surprise of any person who has watched a game of football. However, it was interesting to see how certain players have benefited more than others, suggesting a certain play style. Insights can be derived from comparing the two models alone since it has proven that it highlights players who are frequently on the receiving end of an unfavourable event, whether it is a pass, a clearance or a dribble. Analysing all 30 zones would provide an even more accurate estimate of the above, however, such a process is computationally demanding and could not be performed.</p>
					<p>Football sometimes is a cruel game. Watching a certain player who has not had an impact may suggest that he has had little contribution and most conventional statistics can back that claim, where in reality there was little opportunity to contribute in the first place. Models like this highlight such cases. The context can then be further examined and tactical considerations can be put in place in order to improve performance. Something which in the long run can make a difference.</p>
					<h3>Useful links:</h3>
					<a href="https://github.com/PWolf96/Football-Data-Science">Github: Evaluating player contribution - 2nd order</a>
					<a href="https://medium.com/@pv1g15/evaluating-player-contribution-continued-1f5855636dcd">Medium: Evaluating player contribution - 2nd order</a>		
				</article>
				<!-- Predicting playstyles -->
				<article id="playstyles">
					<h2 class="major">Predicting playstyles</h2>
					<p>This analysis will attempt to use LSTM models to classify the playing styles of teams based on possession sequences. Three main categories will be defined which represent the main styles of play that a team can produce namely Slow build-up, Direct play and Control based play. Two more categories are added in Set-pieces and Uncategorized to allow for isolated events and less organized sequences to be classified.</p>
					<h3 style="margin-top: 100px;">LSTM Neural Networks</h3>
					<p>Long short-term memory is a type of recurrent neural network that can process not only single data points but also entire sequences of data. The name is derived from having the ability to store and take into consideration information not only from short-term memory but also retained information from previous states called ‘long-term memory‘.</p>
					<p>LSTM models have 3 gates and 1 state:</p>
					<p>The cell state is used to store the ‘long-term memory’. It starts from the beginning of a cycle, gets updated if necessary, and then is used in conjunction with the input to produce an output.</p>
					<p>The forget gate is used to update the cell state in the beginning. It takes into consideration the input and the ‘short-term memory’ from the previous event and updates the cell state accordingly.</p>
					<p>The input gate is used to add information from the new event to the previous knowledge in the cell state.</p>
					<p>The output gate takes into consideration information fed from the cell state combined with the previous output data to return a new output.</p>
					<img src="images\playstyles1.PNG" alt="playstyles1" style="width: 100%">
					<h3 style="margin-top: 100px;">Methodology:</h3>
					<p>1. Labelling sequences</p>
					<p>The labels are one of the most important decisions that need to be made in a classification exercise. In football, teams can have</p>
					<p>Slow build-up — A sequence containing more than 5 short-medium length passes which aim to advance the ball into dangerous areas.</p>
					<img src="images\playstyles2.PNG" alt="playstyles2" style="width: 100%">
					<p>Set-Piece — Free-kicks, Corners, Throw-ins</p>
					<img src="images\playstyles3.PNG" alt="playstyles3" style="width: 100%">
					<p>Direct — A sequence that contains mainly forward passes which aim to progress the ball into dangerous areas as quickly as possible.</p>
					<img src="images\playstyles4.PNG" alt="playstyles4" style="width: 100%">
					<p>Control — A sequence containing many forward and backward passes which aim to keep the current state of the game.</p>
					<img src="images\playstyles5.PNG" alt="playstyles5" style="width: 100%">
					<p>Uncategorized — Sequences that do not fall under any of the other four categories.</p>
					<img src="images\playstyles6.PNG" alt="playstyles6" style="width: 100%">
					<p>2119 sequences in total from season 20–21 season have been labelled</p>
					<p>1. Prune event information</p>
					<p>Each event in the database contains 173 pieces of information which would be computationally demanding if used without any adjustments. For this reason, a focus has been given to information that is critical to identifying the playstyle, namely:</p>
					<p>Type of event, play pattern, player position, pressure, location of events and various crucial details about specific event types like pass length, pass height etc. After pruning was performed, the information for each event was reduced to 33 pieces of information.</p>
					<p>2. One-hot encoding all categorical information</p>
					<p>As big part of the data comes in categorical textual format, encoding needs to be performed. Most of the textual data is in a nominal form and is, therefore, one-hot encoded. One-hot encoding avoids the hierarchical assumptions of other type of encodings which are mainly targeting ordinal data. There were also Boolean values which would be mapped as 1 if true and 0 if false.</p>
					<p>3. A threshold of 60 events per sequence has been established</p>
					<p>Out of all 2119 sequences, there were only 8 sequences above 60 with the highest being 79 events. In order to increase efficiency, those 8 sequences have been excluded from the analysis.</p>
					<p>4. Balancing labels</p>
					<p>The initial labelling of playing style indicates that there is an imbalance in the label occurrence as outlined in figure 3.</p>
					<img src="images\playstyles7.PNG" alt="playstyles7" style="width: 100%">
					<p>Slow build-up is almost 8 times more frequent than Control. An oversampling has been applied by resizing each label to achieve a more balanced distribution.</p>
					<p>After being balanced, the dataset was split into training and testing with an 80/20 split and a dictionary was created from the tensors of the sequence and its respective label. Finally, an LSTM model has been applied using PyTorch and PyTorch with cross-entropy has been used as the loss function.</p>
					<h3 style="margin-top: 100px;">Results:</h3>
					<p>Results from the LSTM model are presented in Figures 2 and 3. A high validation accuracy has been achieved with 91%. However, it can be seen that validation loss is higher than training loss, with the minimum loss achieved is 39%. It remains stable at around 40–45% which is a positive sign that the model does not overfit. The relationship between accuracy and loss indicates that although the absolute prediction is accurate most of the time, the model is not confident in it. That kind of behaviour is to be expected due to the high variability of the data inputs and the lack of a strong definition of each label.</p>
					<p>Different scenarios have been run as shown in figures 2 and 3 trying to improve the validation loss. However, it can be seen that results remain pretty stable across all four different scenarios.</p>
					<img src="images\playstyles8.PNG" alt="playstyles8" style="width: 100%">
					<img src="images\playstyles9.PNG" alt="playstyles9" style="width: 100%">
					<p>The achieved validation loss will be deemed satisfactory due to the nature of the analysis. As discussed above football playing patterns do not have a specific definition. They are open to interpretation and are heavily dependent on context. Even though an attempt has been made to define a set of rules to aid labelling, the highly varying nature of the sequences decreases the confidence in the predictions. Moreover, in this analysis, only the critical information to identify the event location and type has been included. Working with a bigger sample size would allow for more context-defining variables to be included which should, in theory, help the model in its predictive confidence. Results shown from the confusion matrix in Figure 4 show that slow build-up is the one with the lowest accuracy and is mostly mistaken for direct or control play styles. This is to be expected due to the fact that both playing styles can be quite similar to each other when taking into account only event coordinates and event count. However, even without including context, the model was able to predict correctly almost 80% of the time. Uncategorized data was mostly mistaken for direct plays and set-pieces. This could be because some of the labelled direct plays and set-pieces contain only one event which is most of what the uncategorized labels are made of. It can be observed that direct plays are not mistaken for control plays, mainly due to the fact that by definition, one play style should presumably contain much shorter sequences than the other, something which the model has recognized. Lastly, it can be seen that control plays have been predicted 100% of the time, which could be largely due to oversampling that was done earlier.</p>
					<img src="images\playstyles10.PNG" alt="playstyles10" style="width: 100%">
					<p>The predictive power of the model can be enhanced by including information on the context of a particular sequence. Information like the types of passes (differentiating between risky and safe) or pressure applied could significantly improve the model. Furthermore, more specific definitions for labelling could also increase the confidence in which the model predicts.</p>
					<h3 style="margin-top: 100px;">Conclusion:</h3>
					<p>The higher the level that football is played, the smaller the differentiations that separate the winners from the losers. The more difficult it becomes for the naked eye to spot and pinpoint an objective reason for a certain outcome. Moreover, no human can catch all details in a game and even experienced professionals would require highly concentrated efforts before labelling certain playing sequences and reaching the stage where they ask the right questions. Having a tool which significantly shortens the amount of time needed to ask the right questions would allow analysts to spend more time finding the answers to those questions.</p>
					<p>An LSTM model was used to classify possession sequences into playing styles. The achieved accuracy was 91% on the best iteration and the loss was 40% which, considering the complex nature of the sequences, was deemed to be satisfactory.</p>
					<p>Such models outline initial steps towards being able to objectively classify complex datasets such as the ones of a free-flowing game of football. The same approach can be used to classify specific events which teams would like to bring attention to during opposition or team analysis. It could also be used towards understanding the habits of players and putting them into a category which can then be used to assess if one is a good fit for a certain system.</p>
					<p>Attention is brought to many events or sequences that share similar contexts and are classified as being the same in an efficient manner, without needing to spend a vast amount of time. The saved time can then be utilized to break them down to the finest details and then find patterns to be able to come close to the way people involved in the decisions think and more importantly maybe uncover more pieces of the puzzle towards a certain outcome. Something which in the long run can make a difference.</p>
					<h3>Useful links:</h3>
					<a href="https://github.com/PWolf96/Football-Data-Science">Github: Predicting playstyles</a>
					<a href="https://medium.com/@pv1g15/classifying-playstyles-cb5b3126a9be">Medium: Predicting playstyles</a>	
				
				</article>
		
			</div>
			<div class="container">
				<h2>Featured Project</h2>
				<div class="card">
					<h2>GARVIZ</h2>
					<p>Garviz is a full stack web application which can be used to assist football teams manage their performance.</p>
					<li><a href="#garviz">Read More</a></li>
				</div>
			</div>
			<div class="container">
				<div class="card">
					<h2>Predicting patterns of play</h2>
					<p>Association analysis is a method used to mine patterns among high volume of events. It groups all the events which happened together and then analyses which occur together more often than not, compared to the total amount of event sequences.</p>
					<li><a href="#patterns">Read More</a></li>
				</div>
				<div class="card">
					<h2>Player contribution</h2>
					<p>This project makes use of markov chains to evaluate how players contribute to the probability of the team taking a shot on goal</p>
					<a href="#contribution1">Read More</a>
				</div>
				<div class="card">
					<h2>Player contribution - 2nd order</h2>
					<p>This project explores further markov chains and tests if accuracy will improve with a higher order analysis</p>
					<a href="#contribution2">Read More</a>
				</div>
				<div class="card">
					<h2>Predicting playstyles</h2>
					<p>A project which makes use of Long-short term memory to classify a chain of events to a particular playstyle</p>
					<a href="#playstyles">Read More</a>
				</div>
				<div class="card">
					<h2>Article 5</h2>
					<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc ultricies nunc sed lacus consequat, a venenatis justo malesuada. Fusce pharetra libero sit amet urna fermentum, at laoreet orci bibendum. Curabitur efficitur blandit turpis eu volutpat.</p>
					<a href="#">Read More</a>
				</div>				
		</div>	
		</div>
		
		<!-- BG -->
		<div id="bg"></div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>